---

---

<section class='footer-card'>
  <div id='container' class='w-full overflow-hidden whitespace-nowrap'>
    <span id='text' class='inline-block origin-left-top font-semibold' data-splitting>
      Seeridia
    </span>
  </div>
</section>

<script>
  import Splitting from 'splitting'

  const container = document.getElementById('container')
  const text = document.getElementById('text')

  const run = () => {
    if (!container || !text) return

    // 拆分文字
    Splitting({ target: text, by: 'chars' })

    const chars = text.querySelectorAll<HTMLElement>('.char')

    // IntersectionObserver + CSS 触发动画
    chars.forEach((char, index) => {
      char.style.transitionDelay = `${index * 0.03}s`
    })

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          container.classList.add('is-visible')
          observer.disconnect()
        }
      },
      { root: null, threshold: 0.1, rootMargin: '0px 0px -10% 0px' }
    )

    observer.observe(container)

    // 缩放文本
    const resizeObserver = new ResizeObserver(() => {
      const scale = container.offsetWidth / text.offsetWidth
      text.style.transform = `scale(${scale})`
      container.style.height = text.offsetHeight * scale + 'px'
    })

    resizeObserver.observe(container)
  }

  if ('requestIdleCallback' in window) {
    requestIdleCallback(() => run(), { timeout: 2000 })
  } else {
    setTimeout(() => run(), 300)
  }
</script>

<style>
  .footer-card :global(.char) {
    display: inline-block;
    opacity: 0;
    transform: translateY(20px);
    transition: transform 0.8s ease, opacity 0.8s ease;
  }

  .footer-card #container.is-visible :global(.char) {
    opacity: 1;
    transform: translateY(0);
  }
</style>
